server:
  port: 8080
  mode: release  # Use release mode in production

database:
  path: ./data/memes.db

qdrant:
  host: localhost
  port: 6334
  collection: emomo

# 旧版 MinIO 配置（已废弃，保留用于向后兼容）
# 建议使用下面的 storage 配置
minio:
  endpoint: localhost:9000
  # access_key: 通过环境变量 MINIO_ACCESS_KEY 设置（默认: minioadmin）
  # secret_key: 通过环境变量 MINIO_SECRET_KEY 设置（默认: minioadmin）
  use_ssl: false
  bucket: memes

# 通用存储配置（推荐使用）
# storage:
#   type: r2                                          # minio, r2, s3
#   endpoint: <account_id>.r2.cloudflarestorage.com   # S3 API endpoint
#   access_key: <r2_access_key>                       # 或通过 STORAGE_ACCESS_KEY 设置
#   secret_key: <r2_secret_key>                       # 或通过 STORAGE_SECRET_KEY 设置
#   use_ssl: true
#   bucket: memes
#   region: auto                                      # R2 使用 "auto"，AWS S3 使用具体 region
#   public_url: https://pub-xxx.r2.dev                # R2.dev 公开访问 URL（推荐配置）

vlm:
  provider: openai
  model: qwen/qwen-2.5-vl-7b-instruct:free
  # api_key: 通过环境变量 OPENAI_API_KEY 设置
  base_url: https://openrouter.ai/api/v1

embedding:
  provider: jina
  model: jina-embeddings-v3
  # api_key: 通过环境变量 JINA_API_KEY 设置
  dimensions: 1024

ingest:
  workers: 5
  batch_size: 10
  retry_count: 3

search:
  score_threshold: 0.0
  query_expansion:
    enabled: true
    model: qwen/qwen-2.5-vl-7b-instruct:free

sources:
  chinesebqb:
    enabled: true
    repo_path: ./data/ChineseBQB

